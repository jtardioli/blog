{% if page.series %}
  {% assign series_posts = site.posts | where: "series", page.series | sort: "series_index" %}
  {% if series_posts.size > 1 %}
    {% assign current_index = nil %}
    {% for post in series_posts %}
      {% if post.url == page.url %}
        {% assign current_index = forloop.index0 %}
      {% endif %}
    {% endfor %}

    <div class="card series-nav mt-4 mb-2">
      <div class="card-body">
        <p class="card-subtitle mb-3 text-muted small">
          <i class="fas fa-layer-group fa-fw me-1"></i>{{ page.series }} series
        </p>
        <div class="d-flex justify-content-between align-items-center gap-2">
          {% if current_index > 0 %}
            {% assign prev_index = current_index | minus: 1 %}
            {% assign prev_post = series_posts[prev_index] %}
            <a href="{{ prev_post.url | relative_url }}" class="btn btn-outline-primary btn-sm d-inline-flex align-items-center gap-1" style="max-width: 45%;">
              <i class="fas fa-arrow-left fa-fw flex-shrink-0"></i><span class="text-truncate">{{ prev_post.title }}</span>
            </a>
          {% else %}
            <span></span>
          {% endif %}

          {% assign next_index = current_index | plus: 1 %}
          {% if next_index < series_posts.size %}
            {% assign next_post = series_posts[next_index] %}
            <a href="{{ next_post.url | relative_url }}" class="btn btn-outline-primary btn-sm d-inline-flex align-items-center gap-1 ms-auto" style="max-width: 45%;">
              <span class="text-truncate">{{ next_post.title }}</span><i class="fas fa-arrow-right fa-fw flex-shrink-0"></i>
            </a>
          {% endif %}
        </div>
      </div>
    </div>
  {% endif %}
{% endif %}
